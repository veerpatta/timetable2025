/**
 * Theme System for Veer Patta Public School Timetable Command Center
 *
 * Implements Dark Mode with:
 * - CSS custom properties for theme tokens
 * - Smooth transitions (0.3s)
 * - System preference detection
 * - localStorage persistence
 *
 * Feature Flag: feat_dark_mode
 */

/* ========================================
   BASE THEME TOKENS (Light Mode Default)
   ======================================== */

:root {
	/* Semantic Color Tokens - Light Mode */
	--bg: #ffffff;
	--bg-secondary: #f9fafb;
	--bg-gradient-start: #eff6ff;
	--bg-gradient-end: #f9fafb;

	--card: #ffffff;
	--card-hover: #f9fafb;

	--text: #111827;
	--text-secondary: #4b5563;
	--text-muted: #6b7280;

	--primary: #2563eb;
	--primary-hover: #1d4ed8;
	--primary-text: #1e40af;

	--border: #e5e7eb;
	--border-hover: #d1d5db;

	--shadow-color: rgba(0, 0, 0, 0.1);
	--shadow-color-sm: rgba(0, 0, 0, 0.05);

	/* Existing color palette (preserved) */
	--primary-50: #eff6ff;
	--primary-100: #dbeafe;
	--primary-200: #bfdbfe;
	--primary-300: #93c5fd;
	--primary-400: #60a5fa;
	--primary-500: #3b82f6;
	--primary-600: #2563eb;
	--primary-700: #1d4ed8;
	--primary-800: #1e40af;
	--primary-900: #1e3a8a;

	--gray-50: #f9fafb;
	--gray-100: #f3f4f6;
	--gray-200: #e5e7eb;
	--gray-300: #d1d5db;
	--gray-400: #9ca3af;
	--gray-500: #6b7280;
	--gray-600: #4b5563;
	--gray-700: #374151;
	--gray-800: #1f2937;
	--gray-900: #111827;

	--green-500: #10b981;
	--yellow-50: #fffbeb;
	--yellow-100: #fef3c7;
	--yellow-500: #f59e0b;
	--red-500: #ef4444;
	--red-600: #dc2626;
}

/* ========================================
   DARK MODE THEME TOKENS
   ======================================== */

[data-theme="dark"] {
	/* Semantic Color Tokens - Dark Mode */
	--bg: #1a1a2e;
	--bg-secondary: #0f0f1e;
	--bg-gradient-start: #1a1a2e;
	--bg-gradient-end: #16213e;

	--card: #16213e;
	--card-hover: #1e2d4d;

	--text: #e8e8e8;
	--text-secondary: #b8b8b8;
	--text-muted: #8b8b8b;

	--primary: #4a7c7e;
	--primary-hover: #5a8c8e;
	--primary-text: #6a9c9e;

	--border: #2a3a5e;
	--border-hover: #3a4a6e;

	--shadow-color: rgba(0, 0, 0, 0.3);
	--shadow-color-sm: rgba(0, 0, 0, 0.2);

	/* Adjusted palette for dark mode */
	--primary-50: #1a2a3e;
	--primary-100: #1e3a5e;
	--primary-200: #2a4a7e;
	--primary-300: #3a5a8e;
	--primary-400: #4a6a9e;
	--primary-500: #4a7c7e;
	--primary-600: #5a8c8e;
	--primary-700: #6a9c9e;
	--primary-800: #7aacae;
	--primary-900: #8abcbe;

	--gray-50: #2a2a3e;
	--gray-100: #2f2f4e;
	--gray-200: #3a3a5e;
	--gray-300: #4a4a6e;
	--gray-400: #6a6a8e;
	--gray-500: #8b8b8b;
	--gray-600: #9b9b9b;
	--gray-700: #b8b8b8;
	--gray-800: #d8d8d8;
	--gray-900: #e8e8e8;

	--green-500: #34d399;
	--yellow-50: #2a2616;
	--yellow-100: #3a3626;
	--yellow-500: #fbbf24;
	--red-500: #f87171;
	--red-600: #ef4444;
}

/* ========================================
   SMOOTH TRANSITIONS
   ======================================== */

/* Apply transitions to all theme-dependent properties */
body,
header,
nav,
.nav-button,
.card,
.stat-card,
.info-card,
.table-container,
footer,
button,
input,
select,
textarea,
.dashboard-card,
.view-card,
.period-card,
.teacher-card,
.class-card {
	transition: background-color 0.3s ease,
	            border-color 0.3s ease,
	            color 0.3s ease,
	            box-shadow 0.3s ease;
}

/* Prevent transition on page load */
.no-transition,
.no-transition * {
	transition: none !important;
}

/* ========================================
   THEME TOGGLE BUTTON STYLES
   ======================================== */

#theme-toggle {
	position: absolute;
	top: 1rem;
	right: 1rem;
	background: var(--card);
	border: 2px solid var(--border);
	border-radius: 50%;
	width: 48px;
	height: 48px;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: all 0.3s ease;
	z-index: 100;
	padding: 0;
	box-shadow: 0 2px 4px var(--shadow-color-sm);
}

#theme-toggle:hover {
	background: var(--card-hover);
	border-color: var(--border-hover);
	transform: scale(1.05);
	box-shadow: 0 4px 8px var(--shadow-color);
}

#theme-toggle:focus {
	outline: 2px solid var(--primary);
	outline-offset: 2px;
}

#theme-toggle:active {
	transform: scale(0.95);
}

#theme-toggle svg {
	width: 24px;
	height: 24px;
	color: var(--text);
	transition: transform 0.3s ease, color 0.3s ease;
}

/* Icon rotation animation on toggle */
#theme-toggle.toggling svg {
	transform: rotate(180deg);
}

/* Responsive positioning */
@media (max-width: 768px) {
	#theme-toggle {
		top: 0.75rem;
		right: 0.75rem;
		width: 44px;
		height: 44px;
	}

	#theme-toggle svg {
		width: 20px;
		height: 20px;
	}
}

/* ========================================
   COMPONENT-SPECIFIC DARK MODE STYLES
   ======================================== */

/* Body and main backgrounds */
[data-theme="dark"] body {
	background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
	color: var(--text);
}

/* Header */
[data-theme="dark"] header {
	background: var(--card);
	color: var(--text);
}

[data-theme="dark"] header h1 {
	color: var(--primary-text);
}

[data-theme="dark"] header p {
	color: var(--text-secondary);
}

/* Navigation */
[data-theme="dark"] nav {
	background: var(--card);
	border-color: var(--border);
}

[data-theme="dark"] .nav-button {
	background: transparent;
	border-color: var(--border);
	color: var(--text-secondary);
}

[data-theme="dark"] .nav-button:hover {
	background: var(--card-hover);
	border-color: var(--border-hover);
	color: var(--text);
}

[data-theme="dark"] .nav-button.active {
	background: var(--primary);
	border-color: var(--primary);
	color: var(--bg);
}

/* Cards and containers */
[data-theme="dark"] .card,
[data-theme="dark"] .stat-card,
[data-theme="dark"] .info-card,
[data-theme="dark"] .dashboard-card,
[data-theme="dark"] .view-card {
	background: var(--card);
	color: var(--text);
	border-color: var(--border);
}

/* Tables */
[data-theme="dark"] .table-container {
	background: var(--card);
	border-color: var(--border);
}

[data-theme="dark"] table {
	background: var(--card);
	color: var(--text);
}

[data-theme="dark"] th {
	background: var(--bg-secondary);
	color: var(--text);
	border-color: var(--border);
}

[data-theme="dark"] td {
	border-color: var(--border);
	color: var(--text);
}

[data-theme="dark"] tr:hover {
	background: var(--card-hover);
}

/* Buttons */
[data-theme="dark"] button:not(.nav-button):not(#theme-toggle) {
	background: var(--primary);
	color: var(--bg);
	border-color: var(--primary);
}

[data-theme="dark"] button:not(.nav-button):not(#theme-toggle):hover {
	background: var(--primary-hover);
}

/* Form inputs */
[data-theme="dark"] input,
[data-theme="dark"] select,
[data-theme="dark"] textarea {
	background: var(--bg-secondary);
	border-color: var(--border);
	color: var(--text);
}

[data-theme="dark"] input:focus,
[data-theme="dark"] select:focus,
[data-theme="dark"] textarea:focus {
	border-color: var(--primary);
	outline-color: var(--primary);
}

/* Footer */
[data-theme="dark"] footer {
	background: var(--card);
	color: var(--text-secondary);
	border-color: var(--border);
}

/* Loader */
[data-theme="dark"] #loader {
	background: var(--bg);
}

[data-theme="dark"] .spinner {
	border-color: var(--border);
	border-top-color: var(--primary);
}

/* Skeleton loaders */
[data-theme="dark"] .skeleton {
	background: linear-gradient(
		90deg,
		var(--bg-secondary) 25%,
		var(--card-hover) 50%,
		var(--bg-secondary) 75%
	);
	background-size: 200% 100%;
	animation: skeleton-loading 1.5s ease-in-out infinite;
}

@keyframes skeleton-loading {
	0% {
		background-position: 200% 0;
	}
	100% {
		background-position: -200% 0;
	}
}

/* ========================================
   PRINT STYLES (Always Light Mode)
   ======================================== */

@media print {
	/* Force light mode for printing */
	[data-theme="dark"] {
		--bg: #ffffff !important;
		--card: #ffffff !important;
		--text: #111827 !important;
		--border: #e5e7eb !important;
	}

	/* Hide theme toggle in print */
	#theme-toggle {
		display: none !important;
	}
}

/* ========================================
   ACCESSIBILITY ENHANCEMENTS
   ======================================== */

/* High contrast mode support */
@media (prefers-contrast: high) {
	[data-theme="dark"] {
		--text: #ffffff;
		--border: #4a4a6e;
	}
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* Focus visible improvements */
[data-theme="dark"] *:focus-visible {
	outline: 2px solid var(--primary);
	outline-offset: 2px;
}
